# Трекер привычек

---

1. **Идея приложения**

Я решила делать трекер для полезных привычек под названием "HabitForge". Идея простая: это будет приложение, где я (или любой другой пользователь) смогу заводить себе привычки (например, "делать зарядку", "читать 15 минут в день") и каждый день отмечать, получилось их выполнить или нет.

2. **Что приложение должно уметь (функционал)**
- **Привычки:** Можно создавать новые привычки, менять их и удалять, если стали неактуальны.
- **Теги:** Чтобы не запутаться, привычки можно будет группировать по тегам (например, "Спорт", "Учеба").
- **Отметки:** Каждый день можно будет зайти и отметить, какие привычки выполнены, а какие нет.
- **Статистика:** Хочется, чтобы система показывала какой-то простой прогресс. Например, сколько дней подряд я уже держу привычку (стрик).
- **Ачивки:** В будущем можно будет добавить какие-нибудь достижения, чтобы было интереснее (например, ачивка за 10 дней выполнения привычки подряд).
3. **Архитектура и сервисы**

Система проектируется по принципам микросервисной архитектуры. Каждый сервис имеет четко определенную зону ответственности и собственное хранилище данных, что обеспечивает слабую связанность и независимое масштабирование.

- **HabitService (Сервис Привычек) — *реализуется по Onion-архитектуре***
    - **Ответственность:** является ядром системы. Отвечает за управление основными сущностями: пользователями, привычками и тегами.
    - **База данных:** SQLite.
- **TrackingService (Сервис Отслеживания) — *реализуется по Трехслойной архитектуре***
    - **Ответственность:** отвечает за фиксацию ежедневного прогресса по привычкам, хранение истории отметок и расчет статистики (например, стрик-серий).
    - **База данных:** SQLite .
- **AchievementService (Сервис Достижений) — *будет добавлен на поздних этапах***
    - **Ответственность:** Управление игровыми элементами, такими как выдача ачивок за достижение определенных целей (например, "Стрик 10 дней").
    - **База данных:**SQLite .
4. **Схема System Design**

<img width="3840" height="3198" alt="Untitled diagram _ Mermaid Chart-2025-10-07-083806" src="https://github.com/user-attachments/assets/e446a018-6981-4c4d-8936-49ed25f8a4f9" />


**Краткое пояснение схемы:**

Клиент общается с нашими сервисами по HTTP. TrackingService, чтобы сохранить отметку о выполнении, сначала спросит у HabitService, существует ли вообще такая привычка (это синхронный вызов). А AchievementService будет получать информацию о событиях (например, что стрик обновлен) асинхронно через очередь сообщений RabbitMQ.

5. **Детализация сервисов **

**5.1. HabitService (Onion Architecture)**


- **Сущности (Domain):**
1. User: Id (Guid), Name (string), Email (string).
2. Habit: Id (Guid), Name (string), Description (string), UserId (Guid).
3. Tag: Id (Guid), Name (string).
- **Контроллеры (Api):**
1. UsersController: GET, POST, PUT, DELETE для пользователей.
2. HabitsController: GET, POST, PUT, DELETE для привычек.
3. TagsController: GET, POST, PUT, DELETE для тегов.

**5.2. TrackingService (Трехслойная архитектура)**

- **Сущности (CoreLib):**
1. DailyRecord: Id (Guid), HabitId (Guid), UserId (Guid), Date (DateOnly), Status (enum: Done, Skipped).
2. Streak: Id (Guid), HabitId (Guid), UserId (Guid), CurrentStreak (int), LongestStreak (int).
3. HabitInfo (DTO): Id (Guid), Name (string) — для получения данных из
- **Контроллеры (Api):**
1. TrackingController:
    - POST /track — тело запроса: { "habitId": "...", "date": "...", "status": "Done" }
    - GET /track/history/{habitId} — получить историю отметок по привычке.
2. StreaksController:
    - GET /streaks/{habitId} — получить текущий и лучший стрик.
3. ReportsController:
    - GET /reports/monthly/{habitId} — получить отчет за месяц.
